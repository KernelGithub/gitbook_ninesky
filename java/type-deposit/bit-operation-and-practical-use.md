# Java 位运算与实际运用

1. **&gt;&gt;&gt; **是无符号右移，在高位补零，**&gt;&gt;** 带符号右移，如果是正数则在高位补零，负数则补1
2. **&lt;&lt; **左移，左移一位表示原来的值**×2**
3. **&gt;&gt;** 右移，右移一位表示原来的值**÷2**
4. 位运算符：与\(&\)、非\(~\)、或\(\|\)、异或\(^\)
   1. **&**： 两边操作数的位**同时为1时**，结果为1，否则为0。如1100&1010=1000
   2. **~**：**0变1,1变0**。
   3. **\|** ：两边操作数的位**有一边为1**就是1，否则为0。如1100\|1010=1110
   4. **^**：两边位**不同时**，结果为1.如1100^1010=0110
5. 原码 -&gt; 反码 -&gt; 补码 之间的相互关系\(计算机的算法都是**补码**操作的，**正数的反码补码相同**，负数如下...\)  
   1. \[-3\] 反=\[1000 0011\]反=1111 1100  
                       原码                   反码  
   2. 负数的**补码**是将其**原码除符号位**之外的各位**求反**之后在**末位再加1**。

   1. \[-3\]补=\[10000011\]补=11111101

      ```
                 原码                    补码
      ```

   2. 也就是说原码转换成补码是**先原码后反码 最后+1**成补码。位运算都是**补码运算**的，所以位运算后要再取反+1才得到真正的原码。

6. 举例

   1. 判断int型变量a是奇数还是偶素

      1. a&1  = 0  //偶数       a&1 =  1  //奇数 

   2. 计算整数的平均值

      1. 对于两个整数，用\(x+y\)/2可能会溢出，x+y 可能会大于INT\_MAX

         1. \(x&y\)+\(\(x^y\)&gt;&gt;1\);

   3. 判断一个整数\(&gt;=0\)是不是2的幂

      1. \(\(x&\(x-1\)\)==0\)&&\(x!=0\);

   4. 交换两个整数

      1. x^=y;x^=x;x^=y;

   5. if\(x==a\){ x=b;}else{x=a}&lt;===&gt; x=a^b^x;

   6. 相反数： \(~x+1\)

   7. 取模运算转化成位运算 \(在不产生溢出的情况下\)   a % \(2^n\) 等价于 a & \(2^n - 1\)

   8. 乘法运算转化成位运算 \(在不产生溢出的情况下\)   a \* \(2^n\) 等价于 a &lt;&lt; n

   9. 除法运算转化成位运算 \(在不产生溢出的情况下\)   a / \(2^n\) 等价于 a&gt;&gt; n

      ```
          例: 12/8 == 12&gt;&gt;3
      ```

   10. a % 2 等价于 a & 1

   11. 计算绝对值

       `int abs( int x ) { int y ; y = x >> 31 ; return (x^y)-y ;        //or: (x+y)^y }`

       分析：y = x &gt;&gt; 31 ;//右移31位，只保留符号位，如果是负数，则是-1，其二进制为1111 1111 1111 1111，全为1，如果是正数，则全0。x^y//X与Y的异或运算，按位进行异或，当y=0时，实际上二者异或后运算的值保持不变，当Y=-1时，则实际上是将原值每位求反（1变成0，0变成1）。-y//当y为0时保持不变，为-1时，则表示加1，因此\(x^y\)-y当Y=0时，表示保持x不变，当y=-1时，则表示将x各位求反后加1，实际上就是对该数求负，由于原来就是负数，因此就是变成正数。综上所述，该过程就是求绝对值。

7. | 功能 | 实例 | 位运算 |
   | :---: | :---: | :---: |
   | 去掉最后一位 | 101101-&gt;10110 | x&gt;&gt;1 |
   | 在最后加一个0 | 101101-&gt;1011010 | x&lt;&lt;1 |
   | 在最后加上一个1 | 101101-&gt;1011011 | x&lt;&lt;1+1 |
   | 把最后一位变成1 | 101100-&gt;101101 | x\|1 |
   | 把最后一位变成0 | 101101-&gt;101100 | x\|1-1 |
   | 最后一位取反 | 101101-&gt;101100 | x^1 |
   | 把右数第K位变成1 | 101001-&gt;101101,k=3 | x\|\(1&lt;&lt;\(k-1\)\) |
   | 把右数第K位变成0 | 101101-&gt;101001,k=3 | x& ~\(1&lt;&lt;k-1\)\) |
   | 右数第K位取反 | 101001-&gt;101101,k=3 | x^\(1&lt;&lt;\(k-1\)\) |
   | 取末K位 | 1101101-&gt;1101,k=5 | x&\(\(1&lt;&lt;k\)-1\) |
   | 取右数第k位 | 1101101-&gt;1,k=4 | x&gt;&gt;\(k-1\)&1 |
   | 把末K位变成1 | 101001-&gt;101111,k=4 | x\|\(1&lt;&lt;k-1\) |
   | 把末K位取反 | 101001-&gt;100110,k=4 | x^\(1&lt;&lt;k-1\) |
   | 把右边起第一个0变成1 | 100101111-&gt;10111111 | x\|\(x+1\) |
   | 把右边连续1变成0 | 100101111-&gt;100100000 | x&\(x+1\) |
   | 把右边连续的0变成1 | 11011000-&gt;11011111 | x\|\(x-1\) |
   | 取右边连续的1 | 10010111-&gt;111 | \(x^\(x+1\)\)&gt;&gt;1 |
   | 去掉右起第一个1的左边 | 100101000-&gt;1000 | x&\(x^\(x-1\)\) |

[http://blog.csdn.net/xiaoliuliu2050/article/details/52994805](http://blog.csdn.net/xiaoliuliu2050/article/details/52994805)

